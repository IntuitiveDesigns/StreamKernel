# =============================================================================
# StreamKernel Profile: metrics-datadog
# Purpose: Same as bench-plaintext but ships Micrometer metrics to Datadog
# =============================================================================

pipeline.name=StreamKernel-Bench-Datadog
pipeline.version=4.0.0
app.service.account=service-account-1

pipeline.parallelism=24
pipeline.app.batch.size=1000

metrics.enabled=true
metrics.type=DATADOG
metrics.step.seconds=10
metrics.datadog.uri=https://api.datadoghq.com
metrics.datadog.hostTag=host
# metrics.datadog.apiKey= (prefer DD_API_KEY env var)

source.type=SYNTHETIC
source.synthetic.payload.size=1024
source.synthetic.high.entropy=false

sink.type=KAFKA
sink.topic=arena-bench-test

dlq.type=KAFKA_DLQ
dlq.topic=streamkernel-dlq
dlq.serializer.type=STRING

transform.type=NOOP
cache.type=NOOP

kafka.broker=localhost:9092

# Benchmark tuning
kafka.producer.acks=0
kafka.producer.idempotence=false
kafka.producer.retries=0
kafka.producer.compression=lz4
kafka.producer.batch.size=65536
kafka.producer.linger.ms=5
kafka.producer.buffer.memory=268435456
kafka.producer.max.request.size=10485760
kafka.producer.max.in.flight.requests.per.connection=5
