# =============================================================================
# StreamKernel Profile: bench-mtls
# Purpose: High throughput with mTLS to Kafka SSL listener (9093)
# =============================================================================

pipeline.name=StreamKernel-Bench-mTLS
pipeline.version=4.0.0
app.service.account=service-account-1

pipeline.parallelism=24
pipeline.app.batch.size=1000

metrics.enabled=true
metrics.type=PROMETHEUS
metrics.prometheus.port=8080
streamkernel.speedometer.window.seconds=5

source.type=SYNTHETIC
source.synthetic.payload.size=1024
source.synthetic.high.entropy=false

sink.type=KAFKA
sink.topic=arena-bench-test

dlq.type=KAFKA_DLQ
dlq.topic=streamkernel-dlq
dlq.serializer.type=STRING

transform.type=NOOP
cache.type=NOOP

# --- Kafka SSL bootstrap ---
kafka.broker=localhost:9093
kafka.security.protocol=SSL

# IMPORTANT: if using self-signed certs with CN=localhost, leave endpoint identification blank.
# If you issue proper certs with SANs, set https.
kafka.ssl.endpoint.identification.algorithm=

# Store paths (Windows paths supported)
kafka.ssl.keystore.location=C:/workspace/StreamKernel/secrets/kafka.client.keystore.p12
kafka.ssl.truststore.location=C:/workspace/StreamKernel/secrets/kafka.truststore.p12
kafka.ssl.keystore.type=PKCS12
kafka.ssl.truststore.type=PKCS12
kafka.ssl.truststore.password=changeit
kafka.ssl.keystore.password=changeit
kafka.ssl.key.password=changeit

# --- Producer tuning (balanced) ---
kafka.producer.acks=1
kafka.producer.idempotence=false
kafka.producer.retries=1000000
kafka.producer.delivery.timeout.ms=120000

kafka.producer.compression=lz4
kafka.producer.batch.size=65536
kafka.producer.linger.ms=5
kafka.producer.buffer.memory=268435456
kafka.producer.max.request.size=10485760
kafka.producer.max.in.flight.requests.per.connection=5
